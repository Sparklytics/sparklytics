version: '3.8'
services:
  sparklytics:
    image: sparklytics/sparklytics:latest
    ports:
      - "3000:3000"
    volumes:
      - sparklytics-data:/data
    environment:
      # Auth mode: "local" (recommended), "password", or "none"
      - SPARKLYTICS_AUTH=local

      # IMPORTANT: keep "true" (default) when accessed over HTTPS.
      # Only set to "false" for plain-HTTP local development.
      - SPARKLYTICS_HTTPS=true

      # DuckDB query memory. Raise to 2GBâ€“8GB on a larger VPS.
      - SPARKLYTICS_DUCKDB_MEMORY=1GB

      # Restrict which origins can query the analytics API from a browser.
      # Uncomment and set to your site(s):
      # - SPARKLYTICS_CORS_ORIGINS=https://yoursite.com,https://www.yoursite.com
    restart: unless-stopped

volumes:
  sparklytics-data:
